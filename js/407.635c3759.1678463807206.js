"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[407,2240],{79756:function(t,e,s){s.r(e),s.d(e,{default:function(){return w}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"route-assets-review-details"},[s("div",{staticClass:"container route-assets-upload-template"},[s("div",{staticClass:"route-assets__page-header-title"},[t._v("Review Routing Details")]),s("div",{staticClass:"route-assets__page-header-description"},[t._v(" "+t._s("Review the details of your routing transaction")+" ")]),s("div",{staticClass:"fields-container"},[s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("INPUT ASSET")]),s("div",{staticClass:"field__value pointer",on:{click:function(){t.showSelectInputAssetDialog=!0}}},[s("div",[t._v(t._s(t.inputToken.symbol))]),s("div",[s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1),s("div",[s("s-icon",{attrs:{name:"arrows-chevron-down-rounded-24",size:"20"}})],1)])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("total usd to be routed")]),s("div",{staticClass:"field__value usd"},[t._v(t._s(t.usdToBeRouted))])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("ESTImated TOKENs required (+5%)")]),s("div",{staticClass:"field__value"},[t._v(" "+t._s(t.formatNumber(t.estimatedAmount))+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1)]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("Total Tokens available")]),s("div",{staticClass:"field__value"},[t._v(" "+t._s(t.totalTokensAvailable)+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1),s("warning-message",{staticClass:"warning-message",attrs:{text:t.noIssues?"balance is ok":"insufficient funds",isError:!t.noIssues}})],1),t.noIssues?t._e():[s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("remaining AMOUNT required")]),s("div",{staticClass:"field__value"},[s("s-button",{staticClass:"s-typography-button--mini add-button",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onAddFundsClick("routing")}}},[t._v(" "+t._s("Add")+" ")]),t._v(" "+t._s(t.formatNumber(t.remainingAmountRequired))+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1)])],t.showXorRequiredField?[s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("XOR fee required")]),s("div",{staticClass:"field__value"},[s("s-button",{staticClass:"s-typography-button--mini add-button",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onAddFundsClick("fee")}}},[t._v(" "+t._s("Add")+" ")]),t._v(" "+t._s(t.formatNumber(t.xorFeeRequired))+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.xor}})],1)])]:t._e(),t.noIssues?t._e():s("s-divider"),s("div",{staticClass:"buttons-container"},[s("s-button",{staticClass:"s-typography-button--big",attrs:{type:"primary",disabled:!t.noIssues},on:{click:function(e){return e.stopPropagation(),t.onContinueClick.apply(null,arguments)}}},[t._v(" "+t._s("Continue")+" ")]),s("s-button",{staticClass:"s-typography-button--big",attrs:{type:"secondary"},on:{click:function(e){return e.stopPropagation(),t.cancelButtonAction.apply(null,arguments)}}},[t._v(" "+t._s("CANCEL PROCESSING")+" ")])],1)],2)]),s("div",{staticClass:"container routing-details-section"},[s("div",{staticClass:"route-assets__page-header-title"},[t._v("Routing Details")]),t._l(t.summaryData,(function(e,i){return s("div",{key:i,staticClass:"asset-data-container fields-container"},[s("div",{staticClass:"asset-title"},[s("div",[s("token-logo",{staticClass:"token-logo",attrs:{token:e.asset}})],1),s("div",[t._v(t._s(e.asset.symbol))])]),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("recepients")]),s("div",{staticClass:"field__value"},[t._v(t._s(e.recipientsNumber))])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("token AMOUNT required")]),s("div",{staticClass:"field__value"},[t._v(t._s(t.formatNumberJs(e.total)))]),s("div",{staticClass:"field__value usd"},[t._v(t._s(t.formatNumberJs(e.usd)))])])],1)}))],2),s("swap-dialog",{attrs:{visible:t.showSwapDialog,presetSwapData:t.swapData},on:{"update:visible":function(e){t.showSwapDialog=e}}}),s("select-input-asset-dialog",{attrs:{visible:t.showSelectInputAssetDialog},on:{"update:visible":function(e){t.showSelectInputAssetDialog=e},onInputAssetSelected:t.onInputAssetSelected}})],1)},a=[],o=s(60760),n=s(70655),r=s(53545),u=s(50592),l=s(67748),d=s(74614),c=s(37365),p=s(96486),m=s(36930),v=s(85530),_=s(22134),g=s(82753),h=s(16546);let b=class extends((0,r.Wr)(c.tA.TransactionMixin)){constructor(...t){super(...t),(0,o.Z)(this,"inputToken",void 0),(0,o.Z)(this,"nextStage",void 0),(0,o.Z)(this,"recipients",void 0),(0,o.Z)(this,"fiatPriceObject",void 0),(0,o.Z)(this,"accountAssets",void 0),(0,o.Z)(this,"setInputToken",void 0),(0,o.Z)(this,"cancelProcessing",void 0),(0,o.Z)(this,"runAssetsRouting",void 0),(0,o.Z)(this,"networkFees",void 0),(0,o.Z)(this,"xor",void 0),(0,o.Z)(this,"showSwapDialog",!1),(0,o.Z)(this,"showSelectInputAssetDialog",!1),(0,o.Z)(this,"action","fee")}onInputAssetSelected(t){this.setInputToken(t),this.showSelectInputAssetDialog=!1}get noIssues(){return this.remainingAmountRequired.toNumber()<=0}get usdToBeRouted(){return this.formatNumber(new m.FPNumber(this.recipients?.reduce(((t,e)=>t+Number(e.usd)),0)))}get estimatedAmount(){const t=1.05*(0,p.sumBy)(this.summaryData,(t=>t.required)),e=this.inputToken?.symbol===g.XOR.symbol;return e?new m.FPNumber(t).add(this.xorFeeAmount):new m.FPNumber(t)}get totalTokensAvailable(){return this.formattedBalance}get xorNetworkFee(){return m.FPNumber.fromCodecValue(this.networkFees[m.Operation.SwapAndSend]).toNumber()}get remainingAmountRequired(){const t=this.inputToken?.symbol===g.XOR.symbol;return t?this.estimatedAmount.add(this.xorFeeAmount).sub(this.fpBalance):this.estimatedAmount.sub(this.fpBalance)}get xorFeeAmount(){return this.summaryData.reduce(((t,e)=>{const s=e.asset.address===this.inputToken.address,i=s?this.networkFees[m.Operation.Transfer]:this.networkFees[m.Operation.SwapAndSend];return t.add(m.FPNumber.fromCodecValue(i))}),m.FPNumber.ZERO)}get xorFeeRequired(){return this.xorFeeAmount.mul(new m.FPNumber(1.05)).sub(this.xorBalance)}get showXorRequiredField(){return this.xorFeeAmount>this.xorBalance&&this.inputToken.address!==g.XOR.address}get xorBalance(){const t=this.xor?.balance;return this.getFPNumberFromCodec(t?.transferable??h.m8,this.xor?.decimals)}get summaryData(){return Object.values((0,p.groupBy)(this.recipients.map((t=>({symbol:t.asset.symbol,...t}))),"symbol")).map((t=>({recipientsNumber:t.length,asset:t[0].asset,usd:(0,p.sumBy)(t,(t=>Number(t.usd))),total:(0,p.sumBy)(t,(t=>Number(t.amount))),required:(0,p.sumBy)(t,(t=>Number(t.usd)))/Number(this.getAssetUSDPrice(this.inputToken)),totalTransactions:t.length})))}get routingSwapData(){const t=this.inputToken?.symbol===g.XOR.symbol,e=t?g.VAL:g.XOR,s=this.inputToken,i=this.remainingAmountRequired.toNumber();return{assetFrom:e,assetTo:s,valueTo:i}}get xorFeeSwapData(){const t=g.VAL,e=g.XOR,s=this.xorFeeRequired.toNumber();return{assetFrom:t,assetTo:e,valueTo:s}}get swapData(){return"fee"===this.action?this.xorFeeSwapData:this.routingSwapData}onAddFundsClick(t){this.action=t,this.showSwapDialog=!0}get fpBalance(){return this.getTokenBalance?m.FPNumber.fromCodecValue(this.getTokenBalance,this.decimals):m.FPNumber.ZERO}get decimals(){return this.inputToken?.decimals??m.FPNumber.DEFAULT_PRECISION}get formattedBalance(){return this.fpBalance.toNumber().toLocaleString("en-US",{maximumFractionDigits:6})}getAssetUSDPrice(t){return m.FPNumber.fromCodecValue(this.fiatPriceObject[t.address]??0,t.decimals)}get getTokenBalance(){const t=this.accountAssets.find((t=>t.address===this.inputToken.address));return(0,v.rh)(t)}formatNumberJs(t){return t&&Number.isFinite(t)?t.toLocaleString("en-US",{maximumFractionDigits:4}):"-"}formatNumber(t){return t&&t.isFinity()?t.toNumber().toLocaleString("en-US",{maximumFractionDigits:4}):"-"}cancelButtonAction(){this.cancelProcessing()}onContinueClick(){this.runAssetsRouting(),this.nextStage()}};(0,n.__decorate)([d.Yn.routeAssets.inputToken],b.prototype,"inputToken",void 0),(0,n.__decorate)([d.aD.routeAssets.processingNextStage],b.prototype,"nextStage",void 0),(0,n.__decorate)([d.Yn.routeAssets.recipients],b.prototype,"recipients",void 0),(0,n.__decorate)([d.SB.wallet.account.fiatPriceObject],b.prototype,"fiatPriceObject",void 0),(0,n.__decorate)([d.SB.wallet.account.accountAssets],b.prototype,"accountAssets",void 0),(0,n.__decorate)([d.aD.routeAssets.setInputToken],b.prototype,"setInputToken",void 0),(0,n.__decorate)([d.aD.routeAssets.cancelProcessing],b.prototype,"cancelProcessing",void 0),(0,n.__decorate)([d.aD.routeAssets.runAssetsRouting],b.prototype,"runAssetsRouting",void 0),(0,n.__decorate)([d.SB.wallet.settings.networkFees],b.prototype,"networkFees",void 0),(0,n.__decorate)([d.Yn.assets.xor],b.prototype,"xor",void 0),b=(0,n.__decorate)([(0,r.wA)({components:{TokenLogo:c.wx.TokenLogo,SwapDialog:(0,l.y)(u.EC.RouteAssetsSwapDialog),WarningMessage:_["default"],SelectInputAssetDialog:(0,l.y)(u.EC.RouteAssetsSelectInputAssetDialog)}})],b);var f=b,k=f,C=s(1001),A=(0,C.Z)(k,i,a,!1,null,"fd7274f8",null),w=A.exports}}]);