"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[8902],{18902:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sora-card sora-card-kyc-wrapper"},[a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingKycView,expression:"loadingKycView"}],staticClass:"sora-card-kyc-view"},[a("s-scrollbar",[a("div",{attrs:{id:"kyc"}}),a("div",{staticStyle:{display:"none"},attrs:{id:"finish"}},[a("div",{staticClass:"alert alert-success"},[e._v("Kyc was successfull, sample integrator response displayed here")])])])],1)])])},s=[],i=a(60760),o=a(70655),n=a(18139),c=a(53545),d=a(55877),l=a(32806),m=a(74614),h=a(43479),u=a(25108);let g=class extends((0,c.Wr)(l.Z)){constructor(...e){super(...e),(0,i.Z)(this,"soraNetwork",void 0),(0,i.Z)(this,"accessToken",void 0),(0,i.Z)(this,"loadingKycView",!0)}async getReferenceNumber(e){const{kycService:t}=(0,h.It)(this.soraNetwork),a=localStorage.getItem("PW-token");try{const t=await fetch(e,{method:"POST",body:JSON.stringify({ReferenceID:(0,d.v4)(),MobileNumber:"",Email:"",AddressChanged:!1,DocumentChanged:!1,IbanTypeID:null,CardTypeID:null,AdditionalData:""}),headers:{Authorization:`Bearer ${a}`}}),r=await t.json();return r.ReferenceNumber}catch(r){u.error("[SoraCard]: Error while initiating KYC",r),this.$notify({message:"Something went wrong. Please, start again",title:""}),this.$emit("confirm-kyc",!1),(0,n.td)(t.sdkURL)}}async mounted(){const{kycService:e,soraProxy:t}=(0,h.It)(this.soraNetwork),a=await this.getReferenceNumber(t.referenceNumberEndpoint);await(0,n.td)(e.sdkURL).catch((()=>{})),(0,n.ve)(e.sdkURL).then((()=>{Paywings.WebKyc.create({KycCredentials:{Username:e.username,Password:e.pass,Domain:"soracard.com",env:e.env,UnifiedLoginApiKey:e.unifiedApiKey},KycSettings:{AppReferenceID:(0,d.v4)(),Language:"en",ReferenceNumber:a,ElementId:"#kyc",Logo:"",WelcomeHidden:!1,WelcomeTitle:"",DocumentCheckWindowHeight:"50vh",DocumentCheckWindowWidth:"100%",HideLoader:!0},KycUserData:{FirstName:"",MiddleName:"",LastName:"",Email:"",MobileNumber:"",Address1:"",Address2:"",Address3:"",ZipCode:"",City:"",State:"",CountryCode:""},UserCredentials:{AccessToken:localStorage.getItem("PW-token"),RefreshToken:localStorage.getItem("PW-refresh-token")}}).on("Error",(t=>{u.error("[SoraCard]: Error while initiating KYC",t),this.$notify({message:"Something went wrong. Please, start again",title:""}),this.$emit("confirm-kyc",!1),(0,n.td)(e.sdkURL)})).on("Success",(t=>{this.$emit("confirm-kyc",!0),(0,n.td)(e.sdkURL)}))})).catch((()=>{})),setTimeout((()=>{this.loadingKycView=!1}),5e3)}};(0,o.__decorate)([m.SB.wallet.settings.soraNetwork],g.prototype,"soraNetwork",void 0),(0,o.__decorate)([(0,c.fI)({default:"",type:String})],g.prototype,"accessToken",void 0),g=(0,o.__decorate)([c.wA],g);var y=g,w=y,k=a(1001),p=(0,k.Z)(w,r,s,!1,null,null,null),f=p.exports}}]);